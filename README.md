# ЁЯдЦ n8n LINE AI Event Assistant (Gemini + Google Sheets)

Workflow р╕Вр╕нр╕З **n8n** р╕Щр╕╡р╣Йр╕Чр╕│р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щ AI Chatbot р╕Ър╕Щ LINE р╕Чр╕╡р╣Ир╕Вр╕▒р╕Ър╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╕Фр╣Йр╕зр╕в **Google Gemini** р╣Вр╕Фр╕вр╕бр╕╡р╕Др╕зр╕▓р╕бр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Юр╕┤р╣Ар╕ир╕йр╣Гр╕Щр╕Бр╕▓р╕г "р╣Ар╕гр╕╡р╕вр╕Бр╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕е" (Tool calling) р╕Ир╕▓р╕Б **Google Sheets** р╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕бр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ър╕Хр╕▓р╕гр╕▓р╕Зр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б (Event Schedule) р╣Др╕Фр╣Йр╕нр╕вр╣Ир╕▓р╕Зр╣Бр╕бр╣Ир╕Щр╕вр╕│ р╕Юр╕гр╣Йр╕нр╕бр╕гр╕░р╕Ър╕Ър╕Ир╕│р╕Ър╕Чр╕кр╕Щр╕Чр╕Щр╕▓ (Memory)

## ЁЯМЯ р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕лр╕ер╕▒р╕Б (Features)

* **Intelligent Agent:** р╣Гр╕Кр╣Й Node `AI Agent` р╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Ър╣Вр╕бр╣Ар╕Фр╕е **Google Gemini (PaLM)** р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕ар╕▓р╕йр╕▓р╕Шр╕гр╕гр╕бр╕Кр╕▓р╕Хр╕┤ (Thai/English)
* **Google Sheets as a Tool:** AI р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Хр╕▒р╕Фр╕кр╕┤р╕Щр╣Гр╕Ир╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б Google Sheets р╣Др╕Фр╣Йр╣Ар╕нр╕Зр╣Ар╕бр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Цр╕▓р╕бр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ъ "р╕Бр╕│р╕лр╕Щр╕Фр╕Бр╕▓р╕г" р╕лр╕гр╕╖р╕н "р╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б"
* **Conversation Memory:** р╕бр╕╡р╕гр╕░р╕Ър╕Ъ `Window Buffer Memory` р╕Ир╕│р╕Ър╕гр╕┤р╕Ър╕Чр╕Бр╕▓р╕гр╕кр╕Щр╕Чр╕Щр╕▓р╣Бр╕вр╕Бр╕Хр╕▓р╕б User ID р╕Вр╕нр╕З LINE
* **LINE Messaging API:** р╕гр╕▒р╕Ъ-р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ьр╣Ир╕▓р╕Щ LINE Official Account р╣Бр╕Ър╕Ъ Real-time
* **Smart Date Formatting:** р╕бр╕╡р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕З System Prompt р╣Гр╕лр╣Йр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щ `MM/dd/yyyy` р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕кр╕нр╕Фр╕Др╕ер╣Йр╕нр╕Зр╕Бр╕▒р╕Ър╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕е

## ЁЯЫая╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕З Workflow (Architecture)

1.  **Webhook:** р╕гр╕▒р╕Ъ Event `Message` р╕Ир╕▓р╕Б LINE
2.  **AI Agent:** р╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕ер╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б р╣Вр╕Фр╕вр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ъ:
    * *Model:* Google Gemini Chat Model
    * *Memory:* Simple Memory (Session Key = User ID)
    * *Tool:* Google Sheets Tool (р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Бр╕Цр╕зр╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З)
3.  **HTTP Request:** р╕кр╣Ир╕Зр╕Др╕│р╕Хр╕нр╕Ър╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Ир╕▓р╕Б AI р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕вр╕▒р╕З LINE р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

## ЁЯУЛ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╣Ар╕Хр╕гр╕╡р╕вр╕б (Prerequisites)

* **n8n:** р╣Ар╕зр╕нр╕гр╣Мр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╕гр╕нр╕Зр╕гр╕▒р╕Ъ LangChain Nodes (р╣Бр╕Щр╕░р╕Щр╕│р╣Ар╕зр╕нр╕гр╣Мр╕Кр╕▒р╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Ф)
* **LINE Developers Account:**
    * р╕кр╕гр╣Йр╕▓р╕З Provider р╣Бр╕ер╕░ Channel (Messaging API)
    * Channel Access Token (Long-lived)
* **Google Cloud Platform:**
    * Google Sheets API (р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Бр╕ер╕░р╕кр╕гр╣Йр╕▓р╕З OAuth Credential)
    * Generative Language API (р╕кр╕│р╕лр╕гр╕▒р╕Ъ Gemini)
* **Google Sheet:** р╣Др╕Яр╕ер╣Мр╕Хр╕▓р╕гр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╕░р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ (Installation)

### 1. Import Workflow
* р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М `N8N LINE AI Event Assistant`
* р╣Гр╕Щ n8n Editor р╣Гр╕лр╣Йр╣Ар╕ер╕╖р╕нр╕Бр╣Ар╕бр╕Щр╕╣ **Import from File** р╣Бр╕ер╣Йр╕зр╣Ар╕ер╕╖р╕нр╕Бр╣Др╕Яр╕ер╣Мр╕Фр╕▒р╕Зр╕Бр╕ер╣Ир╕▓р╕з

### 2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Credentials
р╕Др╕╕р╕Ур╕Ир╕│р╣Ар╕Ыр╣Зр╕Щр╕Хр╣Йр╕нр╕Зр╕кр╕гр╣Йр╕▓р╕З Credentials р╣Гр╕Щ n8n р╣Гр╕лр╣Йр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ:
* **Google Gemini(PaLM) Api account:** р╣Гр╕кр╣И API Key р╕Ир╕▓р╕Б Google AI Studio
* **Google Sheets account:** р╕Чр╕│р╕Бр╕▓р╕г Sign in with Google (OAuth2) р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╣Др╕Яр╕ер╣Мр╣Др╕Фр╣Й

### 3. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Nodes р╕Чр╕╡р╣Ир╕кр╕│р╕Др╕▒р╕Н

#### ЁЯФ╣ Webhook Node
* Copy URL р╕Ир╕▓р╕Б Webhook Node (р╣Ар╕ер╕╖р╕нр╕Б Production URL)
* р╕Щр╕│р╣Др╕Ыр╣Гр╕кр╣Ир╣Гр╕Щ **Webhook URL** р╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ Console р╕Вр╕нр╕З LINE Developers
* р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ **Use webhook**

#### ЁЯФ╣ Google Sheets Tool Node
* р╣Ар╕ер╕╖р╕нр╕Б **Document ID** р╣Ар╕Ыр╣Зр╕Щр╣Др╕Яр╕ер╣М Google Sheets р╕Вр╕нр╕Зр╕Др╕╕р╕Ур╕Чр╕╡р╣Ир╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Др╕зр╣Й
* р╣Ар╕ер╕╖р╕нр╕Б **Sheet Name** р╣Гр╕лр╣Йр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З (р╣Ар╕Кр╣Ир╕Щ `Sheet1`)

#### ЁЯФ╣ HTTP Request Node (LINE Reply)
* р╣Др╕Ыр╕Чр╕╡р╣Ир╣Бр╕Чр╣Зр╕Ъ **Headers**
* р╣Гр╕Щр╕Кр╣Ир╕нр╕З `Authorization` р╣Гр╕лр╣Йр╣Гр╕кр╣Ир╕Др╣Ир╕▓р╕Фр╕▒р╕Зр╕Щр╕╡р╣Й:
    ```text
    Bearer YOUR_CHANNEL_ACCESS_TOKEN
    ```
    *(р╣Бр╕Чр╕Щр╕Чр╕╡р╣И `YOUR_CHANNEL_ACCESS_TOKEN` р╕Фр╣Йр╕зр╕в Token р╕Ир╕▓р╕Б LINE Developers)*

## ЁЯУЭ р╕Бр╕▓р╕гр╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щ Google Sheets (Data Structure)

р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й AI р╕нр╣Ир╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕гр╕╣р╣Йр╣Ар╕гр╕╖р╣Ир╕нр╕З р╣Бр╕Щр╕░р╕Щр╕│р╣Гр╕лр╣Йр╕лр╕▒р╕зр╕Хр╕▓р╕гр╕▓р╕З (Header) р╣Гр╕Кр╣Йр╕ар╕▓р╕йр╕▓р╕нр╕▒р╕Зр╕Бр╕др╕йр╕Чр╕╡р╣Ир╕кр╕╖р╣Ир╕нр╕Др╕зр╕▓р╕бр╕лр╕бр╕▓р╕вр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ р╣Ар╕Кр╣Ир╕Щ:

| Event Name | Date | Time | Location | Description |
| :--- | :--- | :--- | :--- | :--- |
| Meeting | 10/25/2023 | 09:00 | Room A | Monthly summary |
| Workshop | 10/26/2023 | 13:00 | Online | AI Training |

> **р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:** р╣Гр╕Щ System Prompt р╕бр╕╡р╕Бр╕▓р╕гр╕гр╕░р╕Ър╕╕р╣Гр╕лр╣Й AI р╕бр╕нр╕Зр╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щ format `MM/dd/yyyy` р╕Др╕зр╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ format р╣Гр╕Щ Google Sheets р╣Гр╕лр╣Йр╕Хр╕гр╕Зр╕Бр╕▒р╕Щр╣Ар╕Юр╕╖р╣Ир╕нр╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щр╕вр╕│р╕кр╕╣р╕Зр╕кр╕╕р╕Ф

## ЁЯдЭ Contributing
р╕вр╕┤р╕Щр╕Фр╕╡р╕Хр╣Йр╕нр╕Щр╕гр╕▒р╕Ър╕Чр╕╕р╕Бр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В! р╕кр╕▓р╕бр╕▓р╕гр╕Ц Fork repository р╕Щр╕╡р╣Йр╣Бр╕ер╕░р╕кр╣Ир╕З Pull Request р╕бр╕▓р╣Др╕Фр╣Йр╣Ар╕ер╕в

## ЁЯУЬ License
[MIT](https://choosealicense.com/licenses/mit/)
